<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Filmfrei Serien</title>
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body {
      background-color: #121212;
      color: #F5F5F5;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      padding: 20px;
      font-size: 24px;
      font-weight: bold;
      background-color: #1A1A1A;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    main {
      padding: 20px;
    }
    .series-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
    }
    .series-card {
      background-color: #1E1E1E;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .series-card:hover {
      transform: scale(1.05);
    }
    .series-card img {
      width: 100%;
      height: auto;
      display: block;
    }
    .series-title {
      padding: 10px;
      font-size: 16px;
      font-weight: 600;
      text-align: center;
    }
    .series-detail-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .series-detail-container {
      background-color: #1A1A1A;
      border-radius: 12px;
      padding: 20px;
      width: 90%;
      max-width: 1000px;
      position: relative;
      display: flex;
      flex-direction: row;
      gap: 20px;
    }
    .series-detail-left {
      flex: 1;
    }
    .series-detail-right {
      flex: 2;
    }
    .series-cover-img {
      width: 100%;
      border-radius: 12px;
    }
    .series-description {
      margin-top: 10px;
      font-size: 14px;
      color: #ccc;
    }
    .close-detail {
      position: absolute;
      top: 15px; right: 15px;
      background: rgba(255,255,255,0.1);
      border: none;
      border-radius: 50%;
      width: 30px; height: 30px;
      font-size: 18px;
      cursor: pointer;
      color: #fff;
    }
    select, button {
      margin-top: 10px;
      width: 100%;
      padding: 10px;
      background: #0A84FF;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #0066cc;
    }
    .episode-list {
      margin-top: 15px;
    }
    .episode-item {
      margin-bottom: 10px;
      padding: 10px;
      background: #2A2A2A;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .episode-item:hover {
      background: #3A3A3A;
    }
    iframe {
      margin-top: 20px;
      width: 100%;
      height: 400px;
      border: none;
      border-radius: 12px;
      background: #000;
    }
    .loader {
      border: 8px solid #333;
      border-top: 8px solid #fff;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
      display: none;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>Filmfrei – Serien</header>
  <main>
    <div class="series-grid" id="seriesGrid"></div>
  </main>

  <div class="series-detail-overlay" id="seriesOverlay">
    <div class="series-detail-container">
      <button class="close-detail" id="closeDetail">×</button>
      <div class="series-detail-left">
        <img id="seriesCover" class="series-cover-img" src="" alt="">
        <p id="seriesDescription" class="series-description"></p>
      </div>
      <div class="series-detail-right">
        <h2 id="seriesTitle"></h2>
        <select id="seasonSelect"></select>
        <button id="showEpisodesBtn">Folgen anzeigen</button>
        <div class="episode-list" id="episodeList"></div>
        <div id="loader" class="loader"></div>
        <iframe id="episodePlayer" allowfullscreen sandbox="allow-scripts allow-same-origin allow-presentation"></iframe>
      </div>
    </div>
  </div>

  <script>
    const serien = [
  {
    "titel": "The Last of Us",
    "beschreibung": "Zwanzig Jahre nachdem die moderne Zivilisation zerstört wurde - Joel, ein abgehärteter Überlebender, wird angeheuert, um Ellie, ein 14-jähriges Mädchen, aus einer bedrückenden Quarantänezone zu schmuggeln. Was als kleiner Job beginnt, wird bald zu einer brutalen, herzzerreißenden Reise, bei der die beiden die USA durchqueren müssen und aufeinander angewiesen sind, um zu überleben.",
    "cover": "https://s.to/public/img/cover/the-last-of-us-stream-cover-QF4SNqLZifPriiUwNwJ2f6hBb2MCWlbY_220x330.jpg",
    "staffeln": [
      {
        "nummer": 1,
        "folgen": [
          {
            "titel": "Wenn Du in der Dunkelheit verloren bist",
            "iframe": "https://voe.sx/e/qlub6ihlg3av"
          },
          {
            "titel": "Infiziert",
            "iframe": "https://voe.sx/e/mmojp96ncu0u"
          },
          {
            "titel": "Liebe mich, wie ich es will",
            "iframe": "https://voe.sx/e/clwcx6wvtwqm"
          },
          {
            "titel": "Niemand wird uns finden",
            "iframe": "https://voe.sx/e/v5atcnsshrih"
          },
          {
            "titel": "Ertragen und Überleben",
            "iframe": "https://voe.sx/e/xcdt6vg1ba8m"
          },
          {
            "titel": "Familie",
            "iframe": "https://voe.sx/e/wt2wg8ml3la7"
          },
          {
            "titel": "Zurückgelassen",
            "iframe": "https://voe.sx/e/xk3cx2isz3n6"
          },
          {
            "titel": "Wenn wir in Not sind",
            "iframe": "https://voe.sx/e/j56tnyreyvvz"
          },
          {
            "titel": "Suche nach dem Licht",
            "iframe": "https://voe.sx/e/kgne2tw7swbs"
          }
        ]
      },
      {
        "nummer": 2,
        "folgen": [
          {
            "titel": "Future Days",
            "iframe": "https://voe.sx/e/a9xodrygwffe"
          },
          {
            "titel": "Durch das Tal",
            "iframe": "https://voe.sx/e/dv1znzx1l0k5"
          },
          {
            "titel": "Der Weg",
            "iframe": "https://voe.sx/e/cfvdvmoppquz"
          }
        ]
      }
    ]
  }

        {
    "titel": "Squid Game",
    "beschreibung": "Ein mysteriöses Überlebens-Spiel verspricht einen Gewinn von 45.6 Milliarden Won. Die kann Seong Gi-Hun (Lee Jung-jae) gut gebrauchen, denn sein Leben ist eine einzige Talfahrt. Er lebt bei seiner Mutter, leidet an Spielsucht und hat kaum Geld, um seine Tochter finanziell zu versorgen. Das könnte sich alles ändern, als er auf einen rätselhaften Fremden trifft.",
    "cover": "https://s.to/public/img/cover/squid-game-stream-cover-zlmoWSBwlNiImpMsC1NBrARp7iXWlR0H_220x330.jpg",
    "staffeln": [
      {
        "nummer": 1,
        "folgen": [
          {
            "titel": "Rotes Licht, grünes Licht",
            "iframe": "https://voe.sx/e/gqkpodlzndc6"
          },
          {
            "titel": "Hölle",
            "iframe": "https://voe.sx/e/tprvpihyahx7"
          },
          {
            "titel": "Der Mann mit dem Schirm",
            "iframe": "https://voe.sx/e/a5g3gjtn5idj"
          },
          {
            "titel": "Zum Team halten",
            "iframe": "https://voe.sx/e/jcihbjeg4mtj"
          },
          {
            "titel": "Eine gerechte Welt",
            "iframe": "https://voe.sx/e/lqwzppybkbh2"
          },
          {
            "titel": "Gganbu",
            "iframe": "https://voe.sx/e/sgybpnrtv40e"
          },
          {
            "titel": "Die VIPs",
            "iframe": "https://voe.sx/e/6inqzbkf0r2i"
          },
          {
            "titel": "Frontmann",
            "iframe": "https://voe.sx/e/kbka4o34cegg"
          },
          {
            "titel": "Glückstag",
            "iframe": "https://voe.sx/e/vcuczdhwpx9s"
          }
        ]
      },
      {
        "nummer": 2,
        "folgen": [
          {
            "titel": "Brot und Glücksspiel",
            "iframe": "https://voe.sx/e/uiionrzm0xfw"
          },
          {
            "titel": "Halloween-Party",
            "iframe": "https://voe.sx/e/4c1fi73jmpzj"
          },
          {
            "titel": "001",
            "iframe": "https://voe.sx/e/jflw8nlnj5fn"
          },
          {
            "titel": "Sechs Beine",
            "iframe": "https://voe.sx/e/fm6pfan3uxm0"
          },
          {
            "titel": "Noch ein Spiel",
            "iframe": "https://voe.sx/e/uiadj0sdsosu"
          },
          {
            "titel": "O X",
            "iframe": "https://voe.sx/e/g4emcc9h0hzv"
          },
          {
            "titel": "Freund oder Feind",
            "iframe": "https://voe.sx/e/rhnxriowswsl"
          }
        ]
      }
    ]
  }

            
    ];

    const seriesGrid = document.getElementById('seriesGrid');
    const seriesOverlay = document.getElementById('seriesOverlay');
    const seriesTitle = document.getElementById('seriesTitle');
    const seriesCover = document.getElementById('seriesCover');
    const seriesDescription = document.getElementById('seriesDescription');
    const seasonSelect = document.getElementById('seasonSelect');
    const showEpisodesBtn = document.getElementById('showEpisodesBtn');
    const episodeList = document.getElementById('episodeList');
    const episodePlayer = document.getElementById('episodePlayer');
    const loader = document.getElementById('loader');
    const closeDetail = document.getElementById('closeDetail');

    serien.forEach(serie => {
      const card = document.createElement('div');
      card.className = 'series-card';
      card.innerHTML = `
        <img src="${serie.cover}" alt="${serie.titel}">
        <div class="series-title">${serie.titel}</div>
      `;
      card.addEventListener('click', () => openSeriesDetail(serie));
      seriesGrid.appendChild(card);
    });

    function openSeriesDetail(serie) {
      seriesOverlay.style.display = 'flex';
      seriesTitle.textContent = serie.titel;
      seriesCover.src = serie.cover;
      seriesCover.alt = serie.titel;
      seriesDescription.textContent = serie.beschreibung || "";
      seasonSelect.innerHTML = '';
      episodeList.innerHTML = '';
      episodePlayer.style.display = 'none';

      serie.staffeln.forEach(staffel => {
        const option = document.createElement('option');
        option.value = staffel.nummer;
        option.textContent = `Staffel ${staffel.nummer}`;
        seasonSelect.appendChild(option);
      });

      showEpisodesBtn.onclick = () => {
        const selectedSeason = serie.staffeln.find(s => s.nummer == seasonSelect.value);
        if (selectedSeason) {
          episodeList.innerHTML = '';
          selectedSeason.folgen.forEach(folge => {
            const item = document.createElement('div');
            item.className = 'episode-item';
            item.textContent = folge.titel;
            item.addEventListener('click', () => playEpisode(folge.iframe));
            episodeList.appendChild(item);
          });
        }
      };
    }

    function playEpisode(iframeUrl) {
      loader.style.display = 'block';
      episodePlayer.style.display = 'none';
      episodePlayer.src = iframeUrl;

      episodePlayer.onload = () => {
        loader.style.display = 'none';
        episodePlayer.style.display = 'block';
        try {
          episodePlayer.contentWindow.open = function() {
            console.warn('Popup geblockt!');
            return null;
          };
        } catch (e) {
          console.warn('Cross-Origin, kann window.open nicht blockieren.');
        }
      };
    }

    closeDetail.addEventListener('click', () => {
      seriesOverlay.style.display = 'none';
      episodePlayer.src = '';
    });
  </script>
</body>
</html>
